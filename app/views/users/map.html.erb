<p id="notice"><%= notice %></p>

<script src="//maps.google.com/maps/api/js?v=3.13&amp;sensor=false&amp;libraries=geometry" type="text/javascript"></script>
<script src='//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js' type='text/javascript'></script>

<div style='width: 800px;'>
      <div id="map" style='width: 800px; height: 900px;'></div>
</div>
<script type="text/javascript" charset="utf-8">
handler = Gmaps.build('Google');
handler.buildMap({ provider: {
    disableDefaultUI: true
  }, internal: {id: 'map'}}, function(){
    markers = handler.addMarkers([
            {
                "lat": 0,
                "lng": 0,
                "picture": {
                    "url": "https://addons.cdn.mozilla.net/img/uploads/addon_icons/13/13028-64.png",
                    "width":  36,
                    "height": 36
                },
                "infowindow": "hello!"
            }
    ]);
    handler.bounds.extendWith(markers);
    handler.fitMapToBounds();
});

var addPetLocation = function(name, lat, lon, precision) {

    var circleOptions = {
        strokeColor: '#FF0000',
        strokeOpacity: 0.5,
        strokeWeight: 2,
        fillColor: '#FF0000',
        fillOpacity: 0.5,
        map: handler,
        center: new google.maps.LatLng(lat, lon),
        radius: precision * 100
    };

    return new google.maps.Circle(circleOptions);
};

var requestPetLocations = function() {
    console.log('updating stuff');
    // TODO
    setTimeout(requestPetLocations, 500);
};


// Test the adding of pet locations
// TODO
addPetLocation("test", 0, 0, 1000);

// Test the adding of pet locations
requestPetLocations();

</script>
<!-- Add pet info! -->
<!-- TODO -->

<%= link_to 'Edit', edit_user_registration_path %> |
<%= link_to 'Destroy', user_registration_path, :confirm => 'Are you sure you want to destroy your account?', :method => :delete %> |
<%= link_to 'Back', '/' %>
